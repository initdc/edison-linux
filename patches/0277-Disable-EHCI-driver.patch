From db3284defa29546964a4c8388fa7e288790d4f8b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lo=C3=AFc=20Akue?= <loicx.akue@intel.com>
Date: Thu, 13 Mar 2014 13:55:26 +0100
Subject: [PATCH 277/429] Disable EHCI driver
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The HSIC driver is giving us grief.

We do not need any EHCI USB (we just use DWC3 otg) so let's skip the
full ehci subsystem init.

Signed-off-by: Lo√Øc Akue <loicx.akue@intel.com>
---
 drivers/usb/host/ehci-pci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/usb/host/ehci-pci.c b/drivers/usb/host/ehci-pci.c
index fe131565d090..5e299498d33d 100644
--- a/drivers/usb/host/ehci-pci.c
+++ b/drivers/usb/host/ehci-pci.c
@@ -437,7 +437,7 @@ static struct pci_driver ehci_pci_driver = {
 
 static int __init ehci_pci_init(void)
 {
-	if (usb_disabled())
+	//if (usb_disabled())
 		return -ENODEV;
 
 	pr_info("%s: " DRIVER_DESC "\n", hcd_name);
-- 
2.37.3

